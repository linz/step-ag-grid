@use "@linzjs/lui/dist/scss/Core" as lui;
@use "node_modules/ag-grid-community/styles" as ag;

// ag-grid likes to add 1px to this, so we subtract to compensate
$grid-base-font-size: calc(#{lui.$base-font-size} - 1px);

// GridTheme that support ag-grid v29 new SASS API
@include ag.grid-styles(
  (
    themes: (
      step-compact: (
        extend-theme: alpine,
        --ag-row-height: 36px,
        --ag-header-height: 36px,
        --ag-font-size: calc($grid-base-font-size - 2px),
      ),
      step-default: (
        extend-theme: alpine,
        --ag-row-height: 40px,
        --ag-header-height: 40px,
        --ag-font-size: calc($grid-base-font-size),
      ),
    ),

    alpine-active-color: lui.$sea,
    background-color: lui.$white,
    border-color: lui.$dew,
    borders: false,
    borders-critical: true,
    borders-secondary: false,
    cell-horizontal-border: solid lui.$dew,
    cell-horizontal-padding: lui.$unit-sm,
    data-color: lui.$charcoal,
    foreground-color: lui.$charcoal,
    font-family: (
      "Open Sans",
      system-ui,
      sans-serif,
    ),
    font-size: 1rem,
    header-background-color: lui.$white,
    header-foreground-color: lui.$surfie,
    odd-row-background-color: lui.$white,
    row-hover-color: lui.$hint,
    secondary-border-color: lui.$dew,
    selected-row-background-color: lui.$polar,
  )
);

// Fix that when you click below checkbox it doesn't process a click
.ag-cell[col-id="selection"] {
  display: flex;
}

// Fix that when you click below checkbox it doesn't process a click
.ag-cell-wrapper > *:not(.ag-cell-value, .ag-group-value) {
  height: auto;
}

.ag-row:last-of-type {
  border-bottom: 1px solid lui.$dew;
}

.ag-header-cell {
  font-size: 14px;
  font-weight: 600;

  // fix: Display descender line
  padding: 0 11px;

  .LuiIcon {
    fill: lui.$surfie;
  }
}

.ag-cell-label-container {
  padding: 8px 0;

  // Help ag-grid to calculate column height in react portal
  height: fit-content;
}

.ag-header .ag-header-cell[aria-colindex="1"] {
  padding-left: 17px;
}

.ag-cell[role="gridcell"] {
  border-right: none;
  border-left: 1px var(--ag-cell-horizontal-border);
}

.ag-cell[aria-colindex="1"] {
  border-left: 1px solid transparent;
  padding-left: lui.$unit-rg;
}

.ag-cell {
  padding-left: 11px;
  padding-right: 11px;
  display: flex;
  align-items: center;
}

.ag-cell-wrap-text {
  word-break: break-word;
}

.ag-cell.ag-cell-popup-editing,
.ag-cell.ag-selected-for-edit,
.ag-cell-inline-editing {
  padding-left: 9px;
  padding-right: 9px;
  background: rgb(72 160 244 / 20%);

  // These are important, it needs to override ag-grid to work
  border: 3px solid #48a0f4 !important;
  border-right: 3px solid #48a0f4 !important;
}

.ag-row .ag-cell-data-changed {
  // ag-grid natively has !important on this style so we have to use it here :(
  background-color: lightgoldenrodyellow;
}

.ag-center-cols-clipper {
  // when using domLayout={"autoHeight"}, ag grid has a default min-height
  // set to 150px so the !important is necessary here
  min-height: 40px !important;
}

.ag-body-horizontal-scroll-viewport {
  // It's set to scroll by default, but this causes issues with selecting the last row
  overflow-x: auto;
}

.Grid-container .ag-cell {
  font-weight: 400;
}