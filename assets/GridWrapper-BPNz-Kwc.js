import{h as ae,t as fe,n as We,u as ot,v as ut,j as i,s as pe,b as D,c as E,f as ge,x as dt,a as Je,q as N,L as ye,y as ct,z as mt,i as ft}from"./util-ijFjlinu.js";import{r as u,b as pt,R as Ke}from"./iframe-DlkmCGKI.js";import{v as ze,f as gt,w as Xe,q as Ue,x as W,y as yt,e as ht,z as vt,A as Qe,B as bt,C as _t,D as Ze,p as he,E as xt,F as Ct,H as Vt,d as St,o as Nt,b as Z,I as Ft,J as Tt,K as wt,M,L as j,N as Et,O as P,P as Mt,Q as A,R as Ye,s as et,T as Gt,U as qt}from"./Grid-x2Pv4IEw.js";import{a as jt,u as Pt}from"./stateDeferredHook-Du3IBcJj.js";function ve(e,t,n){if(!ae(n))return!1;var a=typeof t;return(a=="number"?fe(n)&&ze(t,n.length):a=="string"&&t in n)?gt(n[t],e):!1}function Rt(e){for(var t=-1,n=e==null?0:e.length,a=0,l=[];++t<n;){var r=e[t];r&&(l[a++]=r)}return l}function kt(e,t,n,a){for(var l=-1,r=e==null?0:e.length;++l<r;){var s=e[l];t(a,s,n(s),e)}return a}function It(e){return function(t,n,a){for(var l=-1,r=Object(t),s=a(t),o=s.length;o--;){var c=s[++l];if(n(r[c],c,r)===!1)break}return t}}var Dt=It();function Ot(e,t){return e&&Dt(e,t,Xe)}function $t(e,t){return function(n,a){if(n==null)return n;if(!fe(n))return e(n,a);for(var l=n.length,r=-1,s=Object(n);++r<l&&a(s[r],r,s)!==!1;);return n}}var tt=$t(Ot);function At(e,t,n,a){return tt(e,function(l,r,s){t(a,l,n(l),s)}),a}function nt(e,t){return function(n,a){var l=We(n)?kt:At,r=t?t():{};return l(n,e,Ue(a),r)}}function Lt(e,t){return W(t,function(n){return[n,e[n]]})}function Bt(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=[a,a]}),n}var Ht="[object Map]",Wt="[object Set]";function Jt(e){return function(t){var n=ot(t);return n==Ht?yt(t):n==Wt?Bt(t):Lt(t,e(t))}}var be=Jt(Xe);function Kt(e,t){var n=-1,a=fe(e)?Array(e.length):[];return tt(e,function(l,r,s){a[++n]=t(l,r,s)}),a}function zt(e){for(var t=-1,n=e==null?0:e.length,a={};++t<n;){var l=e[t];a[l[0]]=l[1]}return a}var Xt=Object.prototype,Ut=Xt.hasOwnProperty,Qt=nt(function(e,t,n){Ut.call(e,n)?e[n].push(t):ht(e,n,[t])});function Zt(e,t){return vt(e,t)}function Yt(e,t,n,a){if(!ae(e))return e;t=Qe(t,e);for(var l=-1,r=t.length,s=r-1,o=e;o!=null&&++l<r;){var c=bt(t[l]),d=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(l!=s){var y=o[c];d=void 0,d===void 0&&(d=ae(y)?y:ze(t[l+1])?[]:{})}_t(o,c,d),o=o[c]}return e}function en(e,t,n){for(var a=-1,l=t.length,r={};++a<l;){var s=t[a],o=Ze(e,s);n(o,s)&&Yt(r,Qe(s,e),o)}return r}function tn(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function nn(e,t){if(e!==t){var n=e!==void 0,a=e===null,l=e===e,r=he(e),s=t!==void 0,o=t===null,c=t===t,d=he(t);if(!o&&!d&&!r&&e>t||r&&s&&c&&!o&&!d||a&&s&&c||!n&&c||!l)return 1;if(!a&&!r&&!d&&e<t||d&&n&&l&&!a&&!r||o&&n&&l||!s&&l||!c)return-1}return 0}function rn(e,t,n){for(var a=-1,l=e.criteria,r=t.criteria,s=l.length,o=n.length;++a<s;){var c=nn(l[a],r[a]);if(c){if(a>=o)return c;var d=n[a];return c*(d=="desc"?-1:1)}}return e.index-t.index}function an(e,t,n){t.length?t=W(t,function(r){return We(r)?function(s){return Ze(s,r.length===1?r[0]:r)}:r}):t=[xt];var a=-1;t=W(t,ut(Ue));var l=Kt(e,function(r,s,o){var c=W(t,function(d){return d(r)});return{criteria:c,index:++a,value:r}});return tn(l,function(r,s){return rn(r,s,n)})}var ln=nt(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function sn(e,t){return en(e,t,function(n,a){return Ct(e,a)})}var on=Vt(function(e,t){return e==null?{}:sn(e,t)}),un=St(function(e,t){if(e==null)return[];var n=t.length;return n>1&&ve(e,t[0],t[1])?t=[]:n>2&&ve(t[0],t[1],t[2])&&(t=[t[0]]),an(e,Nt(t),[])});const R=e=>e.loading?i.jsx(pe,{size:22,divProps:{role:"status","aria-label":"Loading",style:{padding:16}}}):i.jsxs("div",{style:{pointerEvents:e.saving?"none":"inherit"},className:e.className,children:[e.saving&&i.jsx("div",{className:"ComponentLoadingWrapper-saveOverlay"}),e.children]});try{R.displayName="ComponentLoadingWrapper",R.__docgenInfo={description:"If loading is true this returns a loading spinner, otherwise it returns its children.",displayName:"ComponentLoadingWrapper",props:{loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean"}},saving:{defaultValue:null,description:"",name:"saving",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!0,type:{name:"string | undefined"}}}}}catch{}const rt=u.createContext({anchorRef:{current:null},saving:!1,setSaving:()=>{},stopEditing:()=>{},colId:"",field:"",value:null,data:{},selectedRows:[],updateValue:()=>!1,formatValue:()=>"! No gridPopoverContextProvider !"}),G=()=>u.useContext(rt),le=e=>{const{getFilteredSelectedRows:t,updatingCells:n}=u.useContext(Z),a=e.children,l=e.props,r=u.useRef(l.eGridCell),s=u.useRef(!1),[o,c]=u.useState(!1),{colDef:d,stopEditing:y,formatValue:p,data:m,value:g}=l,{cellEditorParams:C}=d,V=C?.multiEdit??!1,_=u.useMemo(()=>V?un(t(),x=>x.id!==l.data.id):[l.data],[t,V,l.data]),v=l.colDef?.field??"",f=l.colDef?.colId??v??"",h=u.useCallback(async(x,S)=>s.current?!0:(s.current=!0,o?!1:await n({selectedRows:_,field:v},x,c,S)),[v,o,_,n]);return i.jsx(rt.Provider,{value:{anchorRef:r,saving:o,setSaving:c,selectedRows:_,colId:f,field:v,data:m,value:g,updateValue:h,formatValue:p,stopEditing:y},children:a})};try{le.displayName="GridPopoverContextProvider",le.__docgenInfo={description:"",displayName:"GridPopoverContextProvider",props:{props:{defaultValue:null,description:"",name:"props",required:!0,type:{name:"ICellEditorParams<any, any, any>"}}}}}catch{}const at={"ag-selected-for-edit":e=>{const{api:t,node:n,colDef:a}=e;return(a.cellEditorSelector?a.cellEditorSelector(e)?.params:a.cellEditorParams)?.multiEdit&&t.getSelectedNodes()?.map(r=>r.id)?.includes(n.id)&&t.getEditingCells().some(r=>r.colId===a.colId)}},k=e=>i.jsx(D,{name:e.icon,title:e.title,alt:e.title,size:e.size??"md",className:E("step-ag-grid__alert-icon",`AgGridGenericCellRenderer-${e.icon}Icon`,e.className,e.disabled&&"GridIcon-disabled")});try{k.displayName="GridIcon",k.__docgenInfo={description:"",displayName:"GridIcon",props:{icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"ns"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const dn=()=>i.jsx(pe,{size:22,divProps:{className:"GridLoadableCell-container",role:"status","aria-label":"Loading"}}),ie=e=>{const{checkUpdating:t}=u.useContext(Ft),n=e.colDef,a=n.cellRendererParams,l=a?.warning;let r=e.data!==void 0&&l?l(e):void 0;const s=a?.info;let o=e.data!==void 0&&s?s(e):void 0;return Array.isArray(r)&&(r=r.join(`
`)),Array.isArray(o)&&(o=o.join(`
`)),t(n.field??n.colId??"",e.data.id)?i.jsx(dn,{}):i.jsxs(i.Fragment,{children:[!!r&&i.jsx(k,{icon:"ic_warning_outline",title:typeof r=="string"?r:"Warning"}),!!o&&i.jsx(k,{icon:"ic_info_outline",title:typeof o=="string"?o:"Info"}),i.jsx("div",{className:"GridCell-container",children:n.cellRendererParams?.originalCellRenderer?i.jsx(n.cellRendererParams.originalCellRenderer,{...e}):i.jsx("span",{title:e.valueFormatted??void 0,children:e.valueFormatted||"–"})}),ge(n.editable,e)&&a?.rightHoverElement&&i.jsx("div",{className:"GridCell-hoverRight",children:a?.rightHoverElement})]})},se=e=>{const n=(e.colDef.cellRendererParams?.shortcutKeys??{})[e.event.key];return n&&!e.editing&&!e.event.repeat&&e.event.type==="keydown"?ge(e.colDef?.editable,e)?n(e)??!0:!0:!["ArrowLeft","ArrowRight","ArrowDown","ArrowUp","Tab"," ","Home","End","PageUp","PageDown"].includes(e.event.key)},oe=e=>{if(typeof e=="function")return t=>e(t)},cn=["number","boolean","string"],ue=({value:e})=>e==null?"–":cn.includes(typeof e)?String(e):JSON.stringify(e),mn=()=>!0,K=(e,t)=>{const n=e.valueFormatter??ue,a=e.filterValueGetter??oe(n),l=e.exportable;return delete e.exportable,{colId:e.field,headerTooltip:e.headerName,sortable:!0,resizable:!0,valueSetter:t?.editor?mn:void 0,editable:e.editable??!!t?.editor,...t?.editor&&{cellClassRules:at,cellEditor:z(t?.editor)},suppressKeyboardEvent:se,...t?.editorParams?{cellEditorParams:{...t.editorParams,multiEdit:t.multiEdit,preventAutoEdit:t.preventAutoEdit??!t?.editor}}:{cellEditorParams:{preventAutoEdit:!t?.editor}},getQuickFilterText:a,valueFormatter:n,...e,cellRenderer:typeof e.cellRenderer=="string"?e.cellRenderer:ie,cellRendererParams:{originalCellRenderer:e.cellRenderer,...e.cellRendererParams},headerComponentParams:{exportable:l,...e.headerComponentParams}}},z=e=>{const t={editor:e};return u.forwardRef(function(a,l){const r=a.formatValue?a.formatValue(a.value):"Missing formatter";return i.jsx(le,{props:a,children:i.jsxs(i.Fragment,{children:[i.jsx(a.colDef.cellRenderer,{...a,valueFormatted:r,...a.colDef.cellRendererParams}),t.editor&&i.jsx(t.editor,{...a})]})})})};try{ie.displayName="GridCellRenderer",ie.__docgenInfo={description:"",displayName:"GridCellRenderer",props:{}}}catch{}try{se.displayName="suppressCellKeyboardEvents",se.__docgenInfo={description:"",displayName:"suppressCellKeyboardEvents",props:{}}}catch{}try{oe.displayName="generateFilterGetter",oe.__docgenInfo={description:"",displayName:"generateFilterGetter",props:{}}}catch{}try{ue.displayName="defaultValueFormatter",ue.__docgenInfo={description:"",displayName:"defaultValueFormatter",props:{}}}catch{}try{K.displayName="GridCell",K.__docgenInfo={description:"",displayName:"GridCell",props:{exportable:{defaultValue:null,description:"",name:"exportable",required:!1,type:{name:"boolean"}},editable:{defaultValue:null,description:"Set to `true` if this column is editable, otherwise `false`. Can also be a function to have different rows editable.",name:"editable",required:!1,type:{name:"boolean | EditableCallback<TData, TValue, any>"}},valueGetter:{defaultValue:null,description:"Function or expression. Gets the value from your data for display.",name:"valueGetter",required:!1,type:{name:"string | ValueGetterFunc<TData, TValue, any>"}},valueFormatter:{defaultValue:null,description:"A function or expression to format a value, should return a string.",name:"valueFormatter",required:!1,type:{name:"string | ValueFormatterFunc<TData, TValue, any>"}},cellRenderer:{defaultValue:null,description:`Provide your own cell Renderer component for this column's cells.
See [Cell Renderer](https://www.ag-grid.com/javascript-data-grid/component-cell-renderer/) for framework specific implementation details.`,name:"cellRenderer",required:!1,type:{name:"string | ((props: ICellRendererParams<TData, TValue, any>) => string | false | ReactElement<any, string | JSXElementConstructor<any>> | null)"}},cellRendererParams:{defaultValue:null,description:"Params to be passed to the `cellRenderer` component.",name:"cellRendererParams",required:!1,type:{name:"{ rightHoverElement?: ReactElement<any, string | JSXElementConstructor<any>>; originalCellRenderer?: any; editAction?: ((selectedRows: TData[]) => void); shortcutKeys?: Record<...> | undefined; warning?: ((props: ICellRendererParams<...>) => string | ... 3 more ... | undefined) | undefined; i..."}},editor:{defaultValue:null,description:"",name:"editor",required:!1,type:{name:"((editorProps: any) => ReactElement<any, string | JSXElementConstructor<any>>)"}}}}}catch{}try{z.displayName="GenericCellEditorComponentWrapper",z.__docgenInfo={description:"",displayName:"GenericCellEditorComponentWrapper",props:{}}}catch{}const lt="gridCellFiller",_e=e=>e.colId===lt,Gn=()=>({colId:lt,headerName:"",flex:1,editable:!1});try{_e.displayName="isGridCellFiller",_e.__docgenInfo={description:"",displayName:"isGridCellFiller",props:{}}}catch{}const xe=e=>({component:z(e.editor),params:{...e.editorParams,multiEdit:e.multiEdit}}),Ce=(e,t)=>K({cellClassRules:at,cellEditorSelector:t,editable:e.editable??!0,...e});try{xe.displayName="Editor",xe.__docgenInfo={description:"",displayName:"Editor",props:{multiEdit:{defaultValue:null,description:"",name:"multiEdit",required:!0,type:{name:"boolean"}},editor:{defaultValue:null,description:"",name:"editor",required:!0,type:{name:"(param: any) => ReactElement<any, string | JSXElementConstructor<any>>"}},editorParams:{defaultValue:null,description:"",name:"editorParams",required:!0,type:{name:"any"}}}}}catch{}try{Ce.displayName="GridCellMultiEditor",Ce.__docgenInfo={description:"Used to choose between cell editors based in data.",displayName:"GridCellMultiEditor",props:{exportable:{defaultValue:null,description:"",name:"exportable",required:!1,type:{name:"boolean"}},editable:{defaultValue:null,description:"Set to `true` if this column is editable, otherwise `false`. Can also be a function to have different rows editable.",name:"editable",required:!1,type:{name:"boolean | EditableCallback<TData, TValue, any>"}},valueGetter:{defaultValue:null,description:"Function or expression. Gets the value from your data for display.",name:"valueGetter",required:!1,type:{name:"string | ValueGetterFunc<TData, TValue, any>"}},valueFormatter:{defaultValue:null,description:"A function or expression to format a value, should return a string.",name:"valueFormatter",required:!1,type:{name:"string | ValueFormatterFunc<TData, TValue, any>"}},cellRenderer:{defaultValue:null,description:`Provide your own cell Renderer component for this column's cells.
See [Cell Renderer](https://www.ag-grid.com/javascript-data-grid/component-cell-renderer/) for framework specific implementation details.`,name:"cellRenderer",required:!1,type:{name:"string | ((props: ICellRendererParams<TData, TValue, any>) => string | false | ReactElement<any, string | JSXElementConstructor<any>> | null)"}},cellRendererParams:{defaultValue:null,description:"Params to be passed to the `cellRenderer` component.",name:"cellRendererParams",required:!1,type:{name:"{ rightHoverElement?: ReactElement<any, string | JSXElementConstructor<any>>; originalCellRenderer?: any; editAction?: ((selectedRows: TData[]) => void); shortcutKeys?: Record<...> | undefined; warning?: ((props: ICellRendererParams<...>) => string | ... 3 more ... | undefined) | undefined; i..."}},editor:{defaultValue:null,description:"",name:"editor",required:!1,type:{name:"((editorProps: any) => ReactElement<any, string | JSXElementConstructor<any>>)"}}}}}catch{}const fn=e=>{const{addExternalFilter:t,removeExternalFilter:n}=Tt();u.useEffect(()=>{const a=e;return a&&t(a),()=>{a&&n(a)}},[t,e,n])},Ve=({className:e,luiButtonProps:t,options:n})=>{const[a,l]=u.useState(n.find(s=>s.defaultSelected)??n[0]),r=u.useMemo(()=>a?.filter,[a]);return fn(r),i.jsx("div",{className:E(e,"flex-col-center"),children:i.jsx(dt,{children:n.map((s,o)=>i.jsx(Je,{...t,className:E("lui-button lui-button-secondary",a?.label===s.label&&"lui-button-active",t?.className),onClick:()=>l(s),children:s.label},`${o}`))})})};try{Ve.displayName="GridFilterButtons",Ve.__docgenInfo={description:"",displayName:"GridFilterButtons",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"ClassValue"}},luiButtonProps:{defaultValue:null,description:"",name:"luiButtonProps",required:!1,type:{name:"Partial<LuiButtonProps>"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"GridFilterButtonsOption<TData>[]"}}}}}catch{}const X=u.forwardRef(function({icon:t,title:n,onClick:a,buttonProps:l,disabled:r=!1,size:s="md"},o){return i.jsx(Je,{...l,type:"button",level:"tertiary",className:"lui-button-icon-only",ref:o,buttonProps:{"aria-label":n},title:n,onClick:a,disabled:r,children:i.jsx(D,{name:t,alt:"Menu",size:s})})});try{X.displayName="GridFilterHeaderIconButton",X.__docgenInfo={description:"",displayName:"GridFilterHeaderIconButton",props:{icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((e: MouseEvent<Element, MouseEvent>) => void)"}},buttonProps:{defaultValue:null,description:"",name:"buttonProps",required:!1,type:{name:"Partial<ButtonHTMLAttributes<HTMLButtonElement>>"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"md"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"ns"'}]}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}}}}}catch{}const Se=({saveState:e=!0})=>{const[t,n]=u.useState(!1),{getColumns:a,getColumnIds:l,invisibleColumnIds:r,setInvisibleColumnIds:s}=u.useContext(Z),o=u.useMemo(()=>N(l())?null:"stepAgGrid_invisibleColumnIds_"+l().join("_"),[l]),c=u.useCallback(()=>s(l("initialHide")),[l,s]);u.useEffect(()=>{if(!(!o||t)&&e){try{const m=window.localStorage.getItem(o);if(!m)c();else{const g=JSON.parse(m??"[]");Array.isArray(g)?g.every(C=>typeof C=="string")?g&&s(g):console.error(`stored invisible ids not strings: ${m}`):console.error(`stored invisible ids not an array: ${m}`)}}catch(m){console.error(m)}n(!0)}},[o,a,t,c,e,s]),u.useEffect(()=>{t&&o&&e&&window.localStorage.setItem(o,JSON.stringify(r))},[o,r,t,e]);const d=u.useCallback(m=>{!m||!r||s(r.includes(m)?r.filter(g=>g!==m):[...r,m])},[r,s]),y=/^\d+$/,p=m=>m.lockVisible||m.colId==null||y.test(m.colId);return i.jsxs(wt,{menuButton:i.jsx(X,{icon:"ic_columns",title:"Column visibility"}),menuClassName:"step-ag-grid-react-menu",portal:!0,unmountOnClose:!0,children:[i.jsx("div",{className:"GridFilterColumnsToggle-container",children:a("headerName").map(m=>i.jsx(M,{disabled:p(m),onClick:g=>{g.key!=="Tab"&&(g.keepOpen=!0,g.key!=="Enter"&&d(m.colId))},children:i.jsx(ye,{isChecked:!!r&&!r.includes(m.colId??""),value:`${m.colId}`,label:m.headerName??"",isDisabled:p(m),inputProps:{onClick:g=>{g.preventDefault(),g.stopPropagation()}},onChange:()=>{}})},m.colId??"no_col_id"))}),i.jsx(j,{},"$$divider_reset_columns"),i.jsxs(M,{onClick:m=>{m.key!=="Tab"&&(m.keepOpen=m.key!=="Enter",c())},children:[i.jsx(D,{name:"ic_regenerate",alt:"Reset columns",size:"md",className:"MenuItem-icon"}),"Reset columns"]},"$$reset_columns")]})};try{Se.displayName="GridFilterColumnsToggle",Se.__docgenInfo={description:"",displayName:"GridFilterColumnsToggle",props:{saveState:{defaultValue:{value:"true"},description:"",name:"saveState",required:!1,type:{name:"boolean"}}}}}catch{}const Ne=e=>{const{downloadCsv:t}=u.useContext(Z),[n,a,l]=jt(!1),r=()=>{a(!0),Et(()=>{t(e),l(!1,4e3)},100)};return n?i.jsx(pe,{size:22,divProps:{role:"status","aria-label":"Downloading...",style:{width:42,display:"flex",justifyContent:"center"}}}):i.jsx(X,{icon:"ic_csv_file",title:"Download CSV",onClick:r,disabled:n})};try{Ne.displayName="GridFilterDownloadCsvButton",Ne.__docgenInfo={description:"",displayName:"GridFilterDownloadCsvButton",props:{}}}catch{}const Fe=({quickFilterPlaceholder:e,defaultValue:t})=>{const{setQuickFilter:n}=u.useContext(Z),[a,l]=u.useState(t??"");return u.useEffect(()=>{n(a)},[a,n]),i.jsxs("div",{className:"GridFilterQuick-container",children:[i.jsx("div",{className:"GridFilterQuick-icon",children:i.jsx(D,{name:"ic_search",alt:"Search",size:"md"})}),i.jsx("input",{"aria-label":"Search",className:"GridFilterQuick-input",type:"text",placeholder:e??"Search",value:a,onChange:r=>{l(r.target.value)}})]})};try{Fe.displayName="GridFilterQuick",Fe.__docgenInfo={description:"",displayName:"GridFilterQuick",props:{quickFilterPlaceholder:{defaultValue:null,description:"",name:"quickFilterPlaceholder",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string"}}}}}catch{}const Te=({children:e})=>i.jsx("div",{className:"Grid-container-filters",children:e});try{Te.displayName="GridFilters",Te.__docgenInfo={description:"",displayName:"GridFilters",props:{}}}catch{}var te,we;function pn(){if(we)return te;we=1,te=function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=void 0,o=void 0,c=void 0,d=[];return function(){var m=e(l),g=new Date().getTime(),C=!s||g-s>m;s=g;for(var V=arguments.length,_=Array(V),v=0;v<V;v++)_[v]=arguments[v];if(C&&r.leading)return r.accumulate?Promise.resolve(a.call(this,[_])).then(function(h){return h[0]}):Promise.resolve(a.call.apply(a,[this].concat(_)));if(o?clearTimeout(c):o=t(),d.push(_),c=setTimeout(y.bind(this),m),r.accumulate){var f=d.length-1;return o.promise.then(function(h){return h[f]})}return o.promise};function y(){var p=o;clearTimeout(c),Promise.resolve(r.accumulate?a.call(this,d):a.apply(this,d[d.length-1])).then(p.resolve,p.reject),d=[],o=null}};function e(n){return typeof n=="function"?n():n}function t(){var n={};return n.promise=new Promise(function(a,l){n.resolve=a,n.reject=l}),n}return te}var gn=pn();const yn=pt(gn),B=u.createContext({value:"GridSubComponentContext value no context",data:{},setValue:()=>{console.error("GridSubComponentContext setValue no context")},setValid:()=>{console.error("GridSubComponentContext setValid no context")},triggerSave:async()=>{console.error("GridSubComponentContext triggerSave no context")},context:null}),I=e=>i.jsxs(i.Fragment,{children:[e.error&&i.jsxs("div",{className:"FormError",children:[i.jsx(D,{alt:"error",name:"ic_error",className:"FormError-text-icon",size:"sm",status:"error"}),i.jsx("span",{className:"FormError-error",children:e.error})]}),e.helpText&&!e.error&&i.jsx("span",{className:"FormError-helpText",children:e.helpText})]});try{I.displayName="FormError",I.__docgenInfo={description:"",displayName:"FormError",props:{helpText:{defaultValue:null,description:"",name:"helpText",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string | boolean | ReactElement<any, string | JSXElementConstructor<any>> | null"}}}}}catch{}function hn(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const ne=new Map,Ee=(e,t)=>{if(!Array.isArray(e))switch(typeof e){case"string":e=[e];break;case"undefined":e=[];break;default:throw new TypeError(`Expected '${t}' to be a string or an array, but got a type of '${typeof e}'`)}return e.filter(n=>{if(typeof n!="string"){if(typeof n>"u")return!1;throw new TypeError(`Expected '${t}' to be an array of strings, but found a type of '${typeof n}' in the array`)}return!0})},vn=(e,t)=>{t={caseSensitive:!1,...t};const n=e+JSON.stringify(t);if(ne.has(n))return ne.get(n);const a=e[0]==="!";a&&(e=e.slice(1)),e=hn(e).replace(/\\\*/g,"[\\s\\S]*");const l=new RegExp(`^${e}$`,t.caseSensitive?"":"i");return l.negated=a,ne.set(n,l),l},bn=(e,t,n,a)=>{if(e=Ee(e,"inputs"),t=Ee(t,"patterns"),t.length===0)return[];t=t.map(s=>vn(s,n));const{allPatterns:l}={},r=[];for(const s of e){let o;const c=[...t].fill(!1);for(const[d,y]of t.entries())if(y.test(s)&&(c[d]=!0,o=!y.negated,!o))break;if(!(o===!1||o===void 0&&t.some(d=>!d.negated)||l&&c.some((d,y)=>!d&&!t[y].negated))){r.push(s);break}}return r};function Me(e,t,n){return bn(e,t,n).length>0}const it=(e,t)=>{if(e==null)return!0;const n=t.split(",").map(s=>s.trim()).filter(s=>s).map(s=>s.split(/\s+/).map(o=>o.startsWith("=")?o.slice(1):o+"*").join(" ")),[a,l]=ln(n,s=>s.startsWith("!")),r=e.replaceAll(","," ").trim().split(/\s+/);return(N(l)||l.some(s=>s.split(/\s+/).map(c=>c.replaceAll(/([!?])/g,"\\$1")).every(c=>r.some(d=>Me(d,c)))))&&(N(a)||a.every(s=>r.every(o=>Me(o,s))))},_n=()=>Promise.resolve(!0),T=({className:e,save:t,invalid:n,dontSaveOnExternalClick:a})=>{const{anchorRef:l,saving:r,updateValue:s,stopEditing:o}=G(),c=u.useRef(null),[d,y]=u.useState(!1);u.useEffect(()=>{y(!0)},[]);const p=u.useCallback(async g=>{if(g==P.CANCEL){await s(_n,0),o();return}n?.()||await s(t??(()=>Promise.resolve(!0)),g===P.TAB_FORWARD?1:g===P.TAB_BACKWARD?-1:0)&&o()},[n,t,o,s]);return{popoverWrapper:u.useCallback(g=>i.jsx(i.Fragment,{children:l.current&&i.jsxs(Mt,{state:d?"open":"closed",portal:!0,unmountOnClose:!0,anchorRef:l,saveButtonRef:c,menuClassName:"step-ag-grid-react-menu",onClose:C=>{C.reason!==P.BLUR&&p(C.reason)},viewScroll:"auto",dontShrinkIfDirectionIsTop:!0,className:e,children:[r&&i.jsx("div",{className:"ComponentLoadingWrapper-saveOverlay"}),g,i.jsx("button",{ref:c,"data-reason":"",onClick:C=>{let V=C.currentTarget.getAttribute("data-reason")??void 0;a&&V===P.BLUR&&(V=P.CANCEL),p(V)},style:{display:"none"}})]})}),[l,d,e,a,r,p]),triggerSave:p}};try{T.displayName="useGridPopoverHook",T.__docgenInfo={description:"",displayName:"useGridPopoverHook",props:{className:{defaultValue:null,description:"",name:"className",required:!0,type:{name:"string | undefined"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"(() => string | boolean | ReactElement<any, string | JSXElementConstructor<any>> | Promise<string | boolean | ReactElement<any, string | JSXElementConstructor<any>> | null> | null) | undefined"}},save:{defaultValue:null,description:"",name:"save",required:!1,type:{name:"((selectedRows: TData[]) => Promise<boolean>)"}},dontSaveOnExternalClick:{defaultValue:null,description:"",name:"dontSaveOnExternalClick",required:!1,type:{name:"boolean"}}}}}catch{}const Ge=e=>({value:e,label:e?String(e):"-"}),U="_____MENU_SEPARATOR_____",qn=Object.freeze({value:U}),st="_____MENU_HEADER_____",qe=e=>({label:e,value:st}),je=e=>typeof e=="symbol"?e.toString():`${e}`,Pe=e=>{const{selectedRows:t,field:n,data:a}=G(),{onSelectFilter:l,options:r,onSelectedItem:s}=e,[o,c]=u.useState(e.filterDefaultValue??""),[d,y]=u.useState(),[p,m]=u.useState(r&&typeof r!="function"?r:null),g=u.useRef(!1),C=u.useRef(null),[V,_]=u.useState(null),[v,f]=u.useState(null),h=u.useCallback(async(b,F)=>((t.some($=>$[n]!==b)||F!==void 0&&C.current!==JSON.stringify(F))&&(s?await s({selectedRows:t,selectedRowIds:t.map($=>$.id),value:b,subComponentValue:F}):t.forEach($=>$[n]=b)),!0),[n,s,t]),x=u.useCallback(async()=>p?v===null?l?(N(o)||await l({selectedRows:t,selectedRowIds:t.map(b=>b.id),value:o}),!0):d&&d.length===1?d[0].subComponent?!1:await h(d[0].value,null):!1:v.subComponent&&!g.current?!1:(await h(v.value,V),!0):!0,[o,d,l,p,h,v,t,V]),{popoverWrapper:S}=T({className:e.className,invalid:()=>!p||!!(v&&!g.current),save:x,dontSaveOnExternalClick:!0});u.useEffect(()=>{if(p===null){if(typeof r!="function"){r&&m(r);return}(async()=>{const b=await r(t,o);m(b??[])})()}},[o,p,r,t]),u.useEffect(()=>{if(e.filtered==="local"){if(p==null){y([]);return}y(Rt(p.map(b=>{if(b.label!=null&&typeof b.label!="string"){console.warn("GridFormDropDown: Cannot filter non-string labels",b);return}return it(b.label||"",o)?b:void 0})))}},[e.filtered,o,p]);const w=u.useMemo(()=>yn(()=>{m(null)},500),[]),O=Pt(o);u.useEffect(()=>{O!=null&&O!=o&&e.filtered==="reload"&&w()},[o,O,e.filtered,w]);let H=null,ee=null;return S(i.jsxs(i.Fragment,{children:[e.filtered&&i.jsxs("div",{className:"GridFormDropDown-filter",children:[i.jsx(A,{className:"filter-item",onFocus:()=>{f(null),_(null),g.current=!0},children:({ref:b})=>i.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[i.jsx("input",{className:"LuiTextInput-input",ref:b,type:"text",placeholder:e.filterPlaceholder??"Filter...","data-testid":"filteredMenu-free-text-input",defaultValue:o,"data-allowtabtosave":!0,"data-disableenterautosave":!e.onSelectFilter&&!(d&&d.length===1&&!d[0].subComponent),onChange:F=>c(F.target.value.trim())}),e.filterHelpText&&ct(o)&&i.jsx(I,{error:null,helpText:e.filterHelpText})]})}),i.jsx(j,{},"$$divider_filter"),e.topComponent&&i.jsxs("div",{children:[i.jsx(e.topComponent,{}),i.jsx(j,{},"$$divider_filter")]})]}),i.jsx(R,{loading:!p,className:"GridFormDropDown-options",children:i.jsxs(i.Fragment,{children:[p&&(N(p)||d&&N(d))&&i.jsx(M,{className:"GridPopoverEditDropDown-noOptions",disabled:!0,children:e.noOptionsMessage??"No Options"},`${je(n)}-empty`),p?.map((b,F)=>(ee=null,b.value===U?i.jsx(j,{},`$$divider_${F}`):b.value===st?(H=i.jsx(Ye,{children:b.label},`$$header_${F}`),i.jsx(i.Fragment,{})):(H&&(ee=H,H=null),(!d||d.includes(b))&&i.jsxs(u.Fragment,{children:[ee,i.jsxs("div",{children:[i.jsxs(M,{disabled:!!b.disabled,title:b.disabled&&typeof b.disabled!="boolean"?b.disabled:"",value:b.value,onFocus:()=>{v!==b&&(f(b),_(null),g.current=!0,b.subComponent&&(C.current=null))},onClick:q=>{q.keepOpen=!!b.subComponent},children:[b.label??(b.value==null?`<${String(b.value)}>`:`${String(b.value)}`),b.subComponent?"...":""]},`${je(n)}-${F}`),b.subComponent&&v===b&&i.jsx(A,{className:"LuiDeprecatedForms",children:()=>i.jsx(B.Provider,{value:{context:{options:p},data:a,value:V,setValue:q=>{_(q),C.current===null&&(C.current=JSON.stringify(q))},setValid:q=>{g.current=q},triggerSave:async()=>{}},children:b.subComponent&&i.jsx("div",{className:"subComponent",children:i.jsx(b.subComponent,{})})})},`${String(b.label)}_subcomponent`)]},`menu-wrapper-${F}`)]},`${F}`))))]})})]}))};try{Ge.displayName="primitiveToSelectOption",Ge.__docgenInfo={description:"",displayName:"primitiveToSelectOption",props:{}}}catch{}try{qe.displayName="MenuHeaderItem",qe.__docgenInfo={description:"",displayName:"MenuHeaderItem",props:{}}}catch{}try{Pe.displayName="GridFormDropDown",Pe.__docgenInfo={description:"",displayName:"GridFormDropDown",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},filtered:{defaultValue:null,description:"",name:"filtered",required:!1,type:{name:"enum",value:[{value:'"local"'},{value:'"reload"'}]}},filterDefaultValue:{defaultValue:null,description:"",name:"filterDefaultValue",required:!1,type:{name:"string"}},filterPlaceholder:{defaultValue:null,description:"",name:"filterPlaceholder",required:!1,type:{name:"string"}},filterHelpText:{defaultValue:null,description:"",name:"filterHelpText",required:!1,type:{name:"string"}},noOptionsMessage:{defaultValue:null,description:"",name:"noOptionsMessage",required:!1,type:{name:"string"}},onSelectedItem:{defaultValue:null,description:"",name:"onSelectedItem",required:!1,type:{name:"((props: GridPopoutEditDropDownSelectedItem<TData, TOptionValue>) => void | Promise<void>)"}},onSelectFilter:{defaultValue:null,description:"",name:"onSelectFilter",required:!1,type:{name:"((props: GridPopoutEditDropDownSelectedItem<TData, TOptionValue>) => void | Promise<void>)"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"FinalSelectOption<TOptionValue>[] | ((selectedRows: TData[], filter?: string | undefined) => MaybePromise<FinalSelectOption<TOptionValue>[] | undefined>) | undefined"}},topComponent:{defaultValue:null,description:"",name:"topComponent",required:!1,type:{name:"(() => ReactElement<any, string | JSXElementConstructor<any>>)"}}}}}catch{}const L=e=>i.jsxs("div",{className:E("LuiTextInput GridLuiTextInput Grid-popoverContainer",e.error&&"hasError",e.className),children:[i.jsxs("span",{className:"LuiTextInput-inputWrapper",children:[i.jsx("input",{type:"text",spellCheck:!0,defaultValue:e.value,...et(e,["error","value","helpText","formatted","className","allowTabToSave"]),className:"LuiTextInput-input",onMouseEnter:t=>{t.currentTarget.focus(),e.onMouseEnter&&e.onMouseEnter(t)},"data-allowtabtosave":e.allowTabToSave}),i.jsx("span",{className:"LuiTextInput-formatted",children:e.formatted})]}),i.jsx(I,{error:e.error,helpText:e.helpText})]});try{L.displayName="TextInputFormatted",L.__docgenInfo={description:"",displayName:"TextInputFormatted",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},helpText:{defaultValue:null,description:"",name:"helpText",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string | boolean | ReactElement<any, string | JSXElementConstructor<any>> | null"}},formatted:{defaultValue:null,description:"",name:"formatted",required:!1,type:{name:"string"}},allowTabToSave:{defaultValue:null,description:"",name:"allowTabToSave",required:!1,type:{name:"boolean"}}}}}catch{}const jn=e=>{const t=typeof e=="string"?parseFloat(e):e;return t==null?"–":de(t,!1)},Pn=e=>{const t=e;return t==null?"–":de(typeof t=="string"?J(t):t,!0,4)},J=e=>e===""?null:parseFloat(e),xn=/^((-)?\d+)?(\.([0-5](\d([0-5](\d(\d+)?)?)?)?)?)?$/,re=(e,t)=>{if(e=e.trim(),e==="")return null;const n=e.match(xn);if(!n)return"Bearing must be a number in D.MMSSS format";const a=n[4];if(a!=null&&a.length>5)return"Bearing has a maximum of 5 decimal places";const l=parseFloat(e);return t?t(l):null},de=(e,t=!0,n=2)=>{if(e==null)return"–";const[a,l]=e.toFixed(5).split(".");let r=Math.abs(parseInt(a)),s=parseInt(l?.substring(0,2)),o=parseInt(l?.substring(2,4));o>=60&&(s++,o-=60),s>=60&&(r++,s-=60),r>=360&&(r-=360);const c=s.toString().padStart(2,"0"),d=o.toString().padStart(2,"0"),y=l?.substring(4,5);let p=`${t&&e>0?"+":""}${e<0?"-":""}${r}°`;return n===5||y!="0"?p+=` ${c}' ${d}.${y}"`:n===4||o!=0?p+=` ${c}' ${d}"`:p+=` ${c}'`,p},Rn=e=>e===null?"Bearing is required":e>=360?"Bearing must be less than 360 degrees":e<0?"Bearing must not be negative":null,kn=e=>e===null?"Bearing correction is required":e>=360?"Bearing correction must be less than 360 degrees":e<=-180?"Bearing correction must be greater then -180 degrees":null,Re=e=>{const{field:t,value:n}=G(),a=u.useMemo(()=>n==null?"":parseFloat(parseFloat(n).toFixed(10)).toString(),[n]),[l,r]=u.useState(a),s=u.useCallback(()=>re(l,e.range),[e.range,l]),o=u.useCallback(async d=>{const y=J(l);return y===J(a)?!0:e.onSave?await e.onSave({selectedRows:d,value:y}):(t==null?console.error("field is not defined in ColDef"):d.forEach(p=>{p[t]=y}),!0)},[a,t,e,l]),{popoverWrapper:c}=T({className:e.className,invalid:s,save:o});return c(i.jsx("div",{className:"GridFormEditBearing-input",children:i.jsx(L,{value:a,onChange:d=>{r(d.target.value.trim())},autoFocus:!0,placeholder:e.placeHolder,formatted:re(l,e.range)||!e.formatValue?"?":e.formatValue(J(l)),error:re(l,e.range),helpText:"Press enter or tab to save"})}))};try{Re.displayName="GridFormEditBearing",Re.__docgenInfo={description:"",displayName:"GridFormEditBearing",props:{formatValue:{defaultValue:null,description:"",name:"formatValue",required:!1,type:{name:"((value: any) => string)"}},placeHolder:{defaultValue:null,description:"",name:"placeHolder",required:!1,type:{name:"string"}},range:{defaultValue:null,description:"",name:"range",required:!1,type:{name:"((value: number | null) => string | null)"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!1,type:{name:"((props: { selectedRows: TData[]; value: number | null; }) => Promise<boolean>)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const ke=e=>{const{selectedRows:t}=G(),[n,a]=u.useState(null),{popoverWrapper:l}=T({className:e.className});return u.useEffect(()=>{(async()=>a(await e.message(t)))()},[e,t]),l(i.jsx(R,{loading:n===null,className:E("GridFormMessage-container",e.className),children:i.jsx(i.Fragment,{children:n})}))};try{ke.displayName="GridFormMessage",ke.__docgenInfo={description:"",displayName:"GridFormMessage",props:{message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"(selectedRows: TData[]) => string | ReactElement<any, string | JSXElementConstructor<any>> | Promise<string | ReactElement<any, string | JSXElementConstructor<...>>>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Ie=e=>{const{selectedRows:t,data:n}=G(),a=u.useRef({}),l=u.useRef(!1),r=u.useRef(null),[s,o]=u.useState(""),[c,d]=u.useState(""),[y,p]=u.useState(),m=u.useCallback(()=>{if(!y)return!0;const f=y.filter(x=>x.checked).map(x=>x.value),h=on(a.current,f);return Object.values(h).some(x=>!x)?!0:e.invalid&&e.invalid(t,y.filter(x=>x.checked))},[y,e,t]),g=u.useCallback(async f=>!y||!e.onSave||c===JSON.stringify(y)?!0:e.onSave({selectedRows:f,selectedOptions:y.filter(h=>h.checked)}),[c,y,e]);u.useEffect(()=>{y||l.current||(l.current=!0,(async()=>{const f=typeof e.options=="function"?await e.options(t):e.options;d(JSON.stringify(f)),p(f),l.current=!1})())},[y,e,t]);const C=u.useMemo(()=>{if(!y)return;const f=Qt(y.filter(h=>it(h.label,s)&&h.value!=null),"filter");return zt(be(f).map(([h,x])=>{let S=!0;return[h,x.map((w,O)=>{if(w.value===U){if(S||O===x.length-1)return null;S=!0}else S=!1;return w}).filter(w=>w)]}))},[s,y]),V=u.useMemo(()=>e.headers??[{header:""}],[e.headers]),{popoverWrapper:_,triggerSave:v}=T({className:e.className,invalid:m,save:g});return _(i.jsx(R,{loading:!y,className:"GridFormMultiSelect-container",children:y&&i.jsxs(i.Fragment,{children:[e.filtered&&i.jsx(Cn,{headerGroups:C,options:y,setOptions:p,filter:s,setFilter:o,triggerSave:v,filterHelpText:e.filterHelpText,onSelectFilter:e.onSelectFilter,filterPlaceholder:e.filterPlaceholder}),C&&(N(C)||!be(C).some(([f,h])=>!N(h)))&&i.jsx(M,{className:"GridMultiSelect-noOptions",disabled:!0,children:e.noOptionsMessage??"No Options"},"noOptions"),C&&!N(C)&&i.jsx("div",{className:"GridFormMultiSelect-options",children:V.map((f,h)=>{const x=C[`${f.filter}`];return!N(x)&&i.jsxs(u.Fragment,{children:[f.header&&i.jsx(Ye,{children:f.header}),x.map((S,w)=>S.value===U?i.jsx(j,{},`div_${w}`):i.jsxs(u.Fragment,{children:[i.jsx(Vn,{item:S,options:y,setOptions:p,onChecked:()=>{Gt(()=>{r.current?.focus()})}}),S.checked&&S.subComponent&&i.jsx(Sn,{item:S,options:y,setOptions:p,data:n,triggerSave:v,ref:r,subComponentIsValid:a.current})]},`val_${S.value}`))]},`group_${h}`)})})]})}))},Cn=e=>{const{options:t,setOptions:n,onSelectFilter:a,filter:l,setFilter:r,headerGroups:s,filterPlaceholder:o,filterHelpText:c,triggerSave:d}=e,y=u.useRef(!1),p=u.useRef(!1),m=u.useCallback(()=>{if(!(!t||!s)){if(N(l.trim())){const _=t.some(v=>v.checked);t.forEach(v=>{v.label!==void 0&&(v.checked=!_)})}else{const _=Object.values(s).some(v=>v.some(f=>f.checked===!1));Object.values(s).forEach(v=>{v.forEach(f=>{f.label!==void 0&&(f.checked=_)})})}n([...t])}},[l,s,t,n]),g=u.useCallback(()=>{if(!t||!a)return;const _=l.trim();if(N(_)){d();return}const v=JSON.stringify(t);a({filter:_,options:t}),v!==JSON.stringify(t)&&(n([...t]),r(""))},[l,a,t,r,n,d]),C=u.useCallback(_=>{_.key==="Enter"&&(y.current=!0)},[]),V=u.useCallback(_=>{if(_.key==="Enter"){if(_.stopPropagation(),_.preventDefault(),_.ctrlKey)m();else if(y.current){const v=l.trim();if(N(v)){d();return}a&&g()}p.current=!0}else _.key==="Control"&&p.current&&r(""),p.current=!1},[g,l,a,r,m,d]);return i.jsxs(i.Fragment,{children:[i.jsx(A,{className:"filter-item",children:_=>i.jsxs("div",{style:{width:"100%"},className:"GridFormMultiSelect-filter",children:[i.jsx("input",{className:"LuiTextInput-input",type:"text",placeholder:o??"Filter...","data-testid":"filteredMenu-free-text-input",value:l,"data-disableenterautosave":!0,"data-allowtabtosave":!0,onChange:v=>r(v.target.value),onKeyDown:C,onKeyUp:V}),c&&i.jsx(I,{error:null,helpText:typeof c=="function"?c(l.trim(),t):c})]})},"filter"),i.jsx(j,{},"$$divider_filter")]})},Vn=e=>{const{item:t,options:n,setOptions:a}=e,l=u.useCallback(r=>{r.checked=!r.checked,a([...n])},[n,a]);return i.jsx(M,{onClick:r=>{r.key!=="Tab"&&r.key!=="Enter"&&(r.keepOpen=!0,l(t)),t.checked&&e.onChecked&&e.onChecked()},children:i.jsx(ye,{isChecked:t.checked??!1,value:`${t.value}`,label:i.jsxs(i.Fragment,{children:[t.warning&&i.jsx(k,{icon:"ic_warning_outline",title:t.warning}),t.label??(t.value==null?`<${t.value}>`:`${t.value}`)]}),inputProps:{onClick:r=>{r.preventDefault(),r.stopPropagation()}},onChange:()=>{}})})},Sn=Ke.forwardRef(Nn);function Nn(e,t){const{data:n,item:a,options:l,setOptions:r,subComponentIsValid:s,triggerSave:o}=e,c=Ke.useRef(null);return u.useEffect(()=>{if(c.current){const d=c.current.querySelectorAll("input")[0]??null;typeof t=="function"?t(d):t&&(t.current=d)}},[t]),i.jsx(A,{className:"LuiDeprecatedForms",ref:c,children:()=>i.jsx(B.Provider,{value:{context:{options:l},data:n,value:a.subValue,setValue:d=>{a.subValue=d,r([...l])},setValid:d=>{s[`${a.value}`]=d},triggerSave:o},children:i.jsx("div",{className:"subComponent",children:a.subComponent&&i.jsx(a.subComponent,{})})})},`${a.value}_subcomponent`)}try{Ie.displayName="GridFormMultiSelect",Ie.__docgenInfo={description:"",displayName:"GridFormMultiSelect",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},filtered:{defaultValue:null,description:"",name:"filtered",required:!1,type:{name:"boolean"}},filterPlaceholder:{defaultValue:null,description:"",name:"filterPlaceholder",required:!1,type:{name:"string"}},filterHelpText:{defaultValue:null,description:"",name:"filterHelpText",required:!1,type:{name:"string | ((filter: string, options: MultiSelectOption[]) => string)"}},noOptionsMessage:{defaultValue:null,description:"",name:"noOptionsMessage",required:!1,type:{name:"string"}},onSelectFilter:{defaultValue:null,description:"",name:"onSelectFilter",required:!1,type:{name:"((props: { filter: string; options: MultiSelectOption[]; }) => void)"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!1,type:{name:"((props: GridFormMultiSelectSaveProps<TData>) => Promise<boolean>)"}},headers:{defaultValue:null,description:"",name:"headers",required:!1,type:{name:"GridFormMultiSelectGroup[]"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"MultiSelectOption[] | ((selectedRows: TData[]) => MultiSelectOption[] | Promise<MultiSelectOption[]>)"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"((selectedRows: TData[], selectedOptions: MultiSelectOption[]) => boolean)"}}}}}catch{}const De=e=>{const{selectedRows:t}=G(),n=u.useRef(!1),[a,l]=u.useState(),[r,s]=u.useState(),o=u.useCallback(m=>{if(!r)return{selectedRows:m,addValues:[],removeValues:[]};const g=(a??[]).filter(h=>h.checked).map(h=>h.value),C=r.filter(h=>h.checked===!1).map(h=>h.value),V=g.filter(h=>C.some(x=>x===h)),_=(a??[]).filter(h=>h.checked!==!0).map(h=>h.value),v=r.filter(h=>h.checked===!0).map(h=>h.value),f=_.filter(h=>v.some(x=>x===h));return{selectedRows:m,addValues:f,removeValues:V}},[a,r]),c=u.useCallback(async m=>!r||!e.onSave||Zt(a?.map(g=>g.checked),r.map(g=>g.checked))||!e.onSave?!0:await e.onSave(o(m)),[o,a,r,e]),d=u.useCallback(()=>r?e.invalid&&e.invalid(o(t)):!0,[o,r,e,t]),{popoverWrapper:y}=T({className:e.className,save:c,invalid:d});u.useEffect(()=>{r||n.current||(n.current=!0,(async()=>{const m=typeof e.options=="function"?await e.options(t):e.options;l(m.map(g=>({...g,label:""}))),s(m),n.current=!1})())},[r,e,t]);const p=u.useCallback(m=>{r&&(m.checked=m.checked===!0&&m.canSelectPartial?"partial":!m.checked,s([...r]))},[r,s]);return y(i.jsx(i.Fragment,{children:i.jsx("div",{className:"Grid-popoverContainer",children:i.jsx("div",{style:{display:"grid",gridAutoFlow:"column",gridTemplateRows:`repeat(${e.maxRowCount??10}, auto)`,maxWidth:"calc(min(100vw,500px))",overflowX:"auto"},children:r&&r.map(m=>i.jsx(i.Fragment,{children:i.jsx(M,{onClick:g=>{g.key!=="Tab"&&g.key!=="Enter"&&(g.keepOpen=!0,p(m))},children:i.jsx(ye,{isChecked:!!m.checked,isIndeterminate:m.checked==="partial",value:`${m.value}`,label:i.jsxs(i.Fragment,{children:[m.warning&&i.jsx(k,{icon:"ic_warning_outline",title:m.warning},"$$icon$$"),i.jsx("span",{className:"GridMultiSelectGrid-Label",children:m.label??(m.value==null?`<${m.value}>`:`${m.value}`)},"$$label$$")]}),inputProps:{onClick:g=>{g.preventDefault(),g.stopPropagation()}},onChange:()=>{}})},JSON.stringify(m.value))}))})})}))};try{De.displayName="GridFormMultiSelectGrid",De.__docgenInfo={description:"",displayName:"GridFormMultiSelectGrid",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},noOptionsMessage:{defaultValue:null,description:"",name:"noOptionsMessage",required:!1,type:{name:"string"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!1,type:{name:"((props: GridFormMultiSelectGridSaveProps<TData>) => Promise<boolean>)"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"MultiSelectGridOption[] | ((selectedRows: TData[]) => MultiSelectGridOption[] | Promise<MultiSelectGridOption[]>)"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"((props: GridFormMultiSelectGridSaveProps<TData>) => boolean)"}},maxRowCount:{defaultValue:null,description:"",name:"maxRowCount",required:!1,type:{name:"number"}}}}}catch{}const Fn="__isMenuSeparator__",In=Object.freeze({label:Fn}),ce=e=>{const{selectedRows:t,updateValue:n,data:a}=G(),l=u.useRef(!1),[r,s]=u.useState(),[o,c]=u.useState(null),d=u.useRef(!1),[y,p]=u.useState(),m=u.useCallback(async f=>{e.defaultAction?await e.defaultAction(f):console.error(`No action specified for ${String(f.menuOption.label)} menu options`)},[e]);u.useEffect(()=>{if(r||l.current)return;l.current=!0;const f=e.options??[];(async()=>{const h=typeof f=="function"?await f(t):f;s(h),e.defaultAction||h.some(S=>!S.action)&&console.error("There's no default action handler and some Menu options are missing an action handler",{invalidMenuOptions:h.filter(S=>!S.action)}),l.current=!1})()},[r,e.defaultAction,e.options,t]);const g=u.useCallback(async f=>(await(f.action??m)({selectedRows:t,menuOption:{...f,subValue:y}}),!0),[m,t,y]),C=u.useCallback(async(f,h)=>{h.subComponent?(d.current=!1,p(null),c(o===h?null:h),f.keepOpen=!0):(d.current=!0,p(null),await n(async()=>g(h),f.key==="Tab"?f.shiftKey?-1:1:0))},[g,o,n]),V=u.useCallback(async()=>{if(o){if(!d.current)return!1;await g(o)}return!0},[g,o]),{popoverWrapper:_,triggerSave:v}=T({className:e.className,invalid:()=>o&&!d.current,save:V});return _(i.jsx(R,{loading:!r,className:"GridFormPopupMenu",children:i.jsx(i.Fragment,{children:N(r)?i.jsx(M,{className:"GridPopoverMenu-noOptions",disabled:!0,children:"No actions"},"GridPopoverMenu-empty"):r?.map((f,h)=>f.label==="__isMenuSeparator__"?i.jsx(j,{},`$$divider_${h}`):!f.hidden&&i.jsxs(u.Fragment,{children:[f.subMenu?i.jsx(qt,{disabled:!!f.disabled,label:f.label,title:f.disabled&&typeof f.disabled!="boolean"?f.disabled:"",children:i.jsx(f.subMenu,{})},`${String(f.label)}`):i.jsx(M,{onClick:x=>void C(x,f),disabled:!!f.disabled,title:f.disabled&&typeof f.disabled!="boolean"?f.disabled:"",children:f.label},`${String(f.label)}`),f.subComponent&&o===f&&i.jsx(A,{className:"LuiDeprecatedForms",children:()=>i.jsx(B.Provider,{value:{context:{},data:a,value:y,setValue:x=>{p(x)},setValid:x=>{d.current=x},triggerSave:v},children:i.jsx("div",{className:"subComponent",children:f.subComponent&&i.jsx(f.subComponent,{})})})},`${String(f.label)}_subcomponent`)]},`${String(f.label)}`))})}))};try{ce.displayName="GridFormPopoverMenu",ce.__docgenInfo={description:`NOTE: If the popout menu doesn't appear on single click when also selecting row it's because
you need a useMemo around your columnDefs`,displayName:"GridFormPopoverMenu",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"(selectedRows: TData[]) => MenuOption<TData>[] | Promise<MenuOption<TData>[]>"}},defaultAction:{defaultValue:null,description:"",name:"defaultAction",required:!1,type:{name:"((props: { selectedRows: TData[]; menuOption: SelectedMenuOptionResult<TData>; }) => void | Promise<void>)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Q=e=>{const t=u.useId(),n=e?.id??t;return i.jsxs("div",{className:E("LuiTextAreaInput Grid-popoverContainer",e.disabled?"isDisabled":"",e.error?"hasError":"",e.className),children:[i.jsxs("label",{htmlFor:n,children:[e.mandatory!=null&&i.jsx("span",{className:"LuiTextAreaInput-mandatory",children:"*"}),e.label!=null&&i.jsx("span",{className:"LuiTextAreaInput-label",children:e.label}),i.jsx("div",{className:"LuiTextAreaInput-wrapper",children:i.jsx("textarea",{rows:5,...et(e,["error","value","helpText","formatted","className","allowTabToSave"]),id:n,value:e.value??"",spellCheck:!0,onMouseEnter:a=>{document.activeElement!=a.currentTarget&&(a.currentTarget.focus(),a.currentTarget.selectionStart=a.currentTarget.value.length),e.onMouseEnter&&e.onMouseEnter(a)},"data-allowtabtosave":e.allowTabToSave,children:e.value})})]}),i.jsx(I,{error:e.error,helpText:e.helpText})]})};try{Q.displayName="TextAreaInput",Q.__docgenInfo={description:"",displayName:"TextAreaInput",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string | ReactElement<any, string | JSXElementConstructor<any>>"}},mandatory:{defaultValue:null,description:"",name:"mandatory",required:!1,type:{name:"boolean"}},helpText:{defaultValue:null,description:"",name:"helpText",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string | boolean | ReactElement<any, string | JSXElementConstructor<any>> | null"}},allowTabToSave:{defaultValue:null,description:"",name:"allowTabToSave",required:!1,type:{name:"boolean"}}}}}catch{}const Y=(e,t,n,a)=>{if(t==null)return null;if(typeof t!="string")return"Value is not a string";if(e.required&&t.trim()=="")return"Must not be empty";if(e.maxLength&&t.length>e.maxLength)return`Must be no longer than ${e.maxLength} characters`;if(e.maxBytes&&mt(t,e.maxBytes))return`Must be no longer than ${e.maxBytes} bytes`;const l=e.numberFormat;if(l){if(t!=""&&!ft(t))return"Must be a valid number";if(t!=""){const r=parseFloat(t);if(l.notZero&&r===0)return"Must not be 0";if(l.gtMin!=null&&r<=l.gtMin)return`Must be greater than ${l.gtMin.toLocaleString()}`;if(l.geMin!=null&&r<l.geMin)return`Must not be less than ${l.geMin.toLocaleString()}`;if(l.ltMax!=null&&r>=l.ltMax)return`Must be less than ${l.ltMax.toLocaleString()}`;if(l.leMax!=null&&r>l.leMax)return`Must not be greater than ${l.leMax.toLocaleString()}`;if(l.precision!=null&&t!=""&&parseFloat(r.toPrecision(l.precision))!=r)return`Must have no more than ${l.precision} digits precision`;if(l.scale!=null&&t!=""&&parseFloat(r.toFixed(l.scale))!=r)return l.scale==0?"Must be a whole number":`Must have no more than ${l.scale} decimal places`}}return e.invalid?e.invalid(t,n,a):null},Oe=e=>{const{value:t,data:n,setValue:a,setValid:l,context:r}=u.useContext(B),s=e.helpText??"Press tab to save";u.useEffect(()=>{t==null&&a(e.defaultValue)},[e.defaultValue,a,t]);const o=u.useCallback(()=>Y(e,t,n,r),[n,e,t,r]);return u.useEffect(()=>{l(t!=null&&o()==null)},[l,o,t]),i.jsx("div",{className:E("FreeTextInput",e.className),children:i.jsx(Q,{className:"free-text-input",value:t,onChange:c=>a(c.target.value),error:o(),helpText:s,placeholder:e.placeholder,allowTabToSave:!0})})};try{Oe.displayName="GridFormSubComponentTextArea",Oe.__docgenInfo={description:"",displayName:"GridFormSubComponentTextArea",props:{placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string | number"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},helpText:{defaultValue:null,description:"",name:"helpText",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!1,type:{name:"number"}},maxBytes:{defaultValue:null,description:"",name:"maxBytes",required:!1,type:{name:"number"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"((value: string, data: TData, context: any) => string | ReactElement<any, string | JSXElementConstructor<any>> | null)"}},numberFormat:{defaultValue:null,description:"",name:"numberFormat",required:!1,type:{name:"{ precision?: number; scale?: number; gtMin?: number | undefined; geMin?: number | undefined; ltMax?: number | undefined; leMax?: number | undefined; notZero?: boolean | undefined; } | undefined"}}}}}catch{}const $e=e=>{const{value:t,setValue:n,setValid:a,data:l,context:r}=u.useContext(B),s=e.helpText??"Press enter or tab to save";u.useEffect(()=>{t==null&&n(e.defaultValue)},[e.defaultValue,n,t]);const o=u.useCallback(()=>Y(e,t,l,r),[r,l,e,t]);return u.useEffect(()=>{a(t!=null&&o()==null)},[a,o,t]),i.jsx(L,{value:t,error:o(),onChange:c=>n(c.target.value),helpText:s,placeholder:e.placeholder,style:{width:"100%"},allowTabToSave:!0})};try{$e.displayName="GridFormSubComponentTextInput",$e.__docgenInfo={description:"",displayName:"GridFormSubComponentTextInput",props:{placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string | number"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"string"}},helpText:{defaultValue:null,description:"",name:"helpText",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!1,type:{name:"number"}},maxBytes:{defaultValue:null,description:"",name:"maxBytes",required:!1,type:{name:"number"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"((value: string, data: TData, context: any) => string | ReactElement<any, string | JSXElementConstructor<any>> | null)"}},numberFormat:{defaultValue:null,description:"",name:"numberFormat",required:!1,type:{name:"{ precision?: number; scale?: number; gtMin?: number | undefined; geMin?: number | undefined; ltMax?: number | undefined; leMax?: number | undefined; notZero?: boolean | undefined; } | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Ae=e=>{const{field:t,value:n,data:a}=G(),l=u.useMemo(()=>n==null?"":`${n}`,[n]),[r,s]=u.useState(l),o=e.helpText??"Press tab to save",c=u.useCallback(()=>Y(e,r,a,{}),[e,r,a]),d=u.useCallback(async p=>{if(c())return!1;const m=r.trim();return l===m?!0:e.onSave?await e.onSave({selectedRows:p,value:m}):(p.forEach(g=>g[t]=m),!0)},[c,r,l,e,t]),{popoverWrapper:y}=T({className:e.className,invalid:c,save:d});return y(i.jsx("div",{className:"subComponent",style:{display:"flex",flexDirection:"row",width:e.width??240},children:i.jsx(Q,{value:r,onChange:p=>s(p.target.value),error:c(),placeholder:e.placeholder??"Type here",helpText:o})}))};try{Ae.displayName="GridFormTextArea",Ae.__docgenInfo={description:"",displayName:"GridFormTextArea",props:{placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string | number"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!1,type:{name:"((props: { selectedRows: TData[]; value: string; }) => Promise<boolean>)"}},helpText:{defaultValue:null,description:"",name:"helpText",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!1,type:{name:"number"}},maxBytes:{defaultValue:null,description:"",name:"maxBytes",required:!1,type:{name:"number"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"((value: string, data: TData, context: any) => string | ReactElement<any, string | JSXElementConstructor<any>> | null)"}},numberFormat:{defaultValue:null,description:"",name:"numberFormat",required:!1,type:{name:"{ precision?: number; scale?: number; gtMin?: number | undefined; geMin?: number | undefined; ltMax?: number | undefined; leMax?: number | undefined; notZero?: boolean | undefined; } | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Le=e=>{const{field:t,value:n,data:a}=G(),l=e.helpText??"Press enter or tab to save",r=u.useMemo(()=>n==null?"":`${n}`,[n]),[s,o]=u.useState(r),c=u.useCallback(()=>Y(e,s,a,{}),[a,e,s]),d=u.useCallback(async p=>{if(c())return!1;const m=s.trim();return r===m?!0:e.onSave?await e.onSave({selectedRows:p,value:m}):(p.forEach(g=>g[t]=m),!0)},[c,s,r,e,t]),{popoverWrapper:y}=T({className:e.className,invalid:c,save:d});return y(i.jsx("div",{style:{display:"flex",flexDirection:"row"},className:"FormTest subComponent",children:i.jsx(L,{value:s,onChange:p=>o(p.target.value),error:c(),formatted:e.units,style:{width:e.width??240},placeholder:e.placeholder??"Type here",helpText:l})}))};try{Le.displayName="GridFormTextInput",Le.__docgenInfo={description:"",displayName:"GridFormTextInput",props:{placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},units:{defaultValue:null,description:"",name:"units",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string | number"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!1,type:{name:"((props: { selectedRows: TData[]; value: string; }) => Promise<boolean>)"}},helpText:{defaultValue:null,description:"",name:"helpText",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!1,type:{name:"number"}},maxBytes:{defaultValue:null,description:"",name:"maxBytes",required:!1,type:{name:"number"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"((value: string, data: TData, context: any) => string | ReactElement<any, string | JSXElementConstructor<any>> | null)"}},numberFormat:{defaultValue:null,description:"",name:"numberFormat",required:!1,type:{name:"{ precision?: number; scale?: number; gtMin?: number | undefined; geMin?: number | undefined; ltMax?: number | undefined; leMax?: number | undefined; notZero?: boolean | undefined; } | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const me=e=>{const t=!ge(e.colDef?.editable,e);return i.jsx(D,{name:"ic_more_vert",alt:"More actions",size:"md",className:E("GridPopoutMenu-burger",t&&"GridPopoutMenu-burgerDisabled")})};try{me.displayName="GridRenderPopoutMenuCell",me.__docgenInfo={description:"",displayName:"GridRenderPopoutMenuCell",props:{}}}catch{}const Be=(e,t)=>K({minWidth:48,maxWidth:48,width:40,sortable:!1,editable:e.editable!=null?e.editable:!0,exportable:!1,cellStyle:{flex:1,justifyContent:"center"},cellRenderer:me,singleClickEdit:!0,...e},{editor:ce,preventAutoEdit:!0,...t});try{Be.displayName="GridPopoverMenu",Be.__docgenInfo={description:"Popout burger menu",displayName:"GridPopoverMenu",props:{}}}catch{}const He=u.forwardRef(function({children:t,maxHeight:n,className:a},l){return i.jsx("div",{className:E("Grid-wrapper",a),style:{maxHeight:n},ref:l,children:t})});try{He.displayName="GridWrapper",He.__docgenInfo={description:"",displayName:"GridWrapper",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},maxHeight:{defaultValue:null,description:"",name:"maxHeight",required:!1,type:{name:"string | number"}}}}}catch{}export{k as A,on as B,un as C,rt as D,xe as E,I as F,K as G,Re as H,ce as I,kn as J,Pn as K,Rn as L,U as M,jn as N,ke as O,In as P,tt as Q,_e as R,lt as S,Rt as T,yn as U,He as a,Te as b,Fe as c,Ve as d,Be as e,$e as f,Oe as g,T as h,Le as i,Ce as j,Ae as k,Pe as l,Se as m,Ne as n,qe as o,Ge as p,qn as q,ve as r,nt as s,Dt as t,G as u,De as v,Ie as w,ln as x,Gn as y,fn as z};
